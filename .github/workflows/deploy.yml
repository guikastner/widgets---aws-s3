name: Deploy para AWS S3

on:
  push:
    branches:
      - master # ou sua branch principal

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      # 1Ô∏è‚É£ Fazer o checkout do reposit√≥rio
      - name: Checkout do c√≥digo
        uses: actions/checkout@v3

      # 2Ô∏è‚É£ Configurar as credenciais da AWS usando os SECRETS
      - name: Configurar AWS Credentials
        uses: aws-actions/configure-aws-credentials@v2
        with:
          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
          aws-region: ${{ secrets.AWS_REGION }}

      # 3Ô∏è‚É£ Sincronizar arquivos com o S3
      - name: Sincronizar arquivos com S3
        run: |
          aws s3 sync . s3://${{ secrets.S3_BUCKET_NAME }} --exclude ".git/*" --exclude ".github/*" --delete

      # 4Ô∏è‚É£ Feedback no GitHub Actions
      - name: Finaliza√ß√£o
        run: echo "üöÄ Upload conclu√≠do para o bucket ${{ secrets.S3_BUCKET_NAME }}"
